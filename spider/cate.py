import requests
import re
import spider

# 目标网页
url = "http://sd-get.com/cate-1972-1927.html"
response = requests.get(url)

text = """
<ul class="ul-parent clearfix"><li class="li-parent" data-cateid="1927"><div class="div-parent"><a href="/cate-1972-1927.html">D系列</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent cur" data-cateid="1928"><div class="div-parent"><a href="/cate-1972-1928.html">大宇系列</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="1970"><div class="div-parent"><a href="/cate-1972-1970.html">大宇220</a></div></li><li class="li-parent" data-cateid="1971"><div class="div-parent"><a href="/cate-1972-1971.html">大宇280</a></div></li><li class="li-parent" data-cateid="1972"><div class="div-parent"><a href="/cate-1972-1972.html">大宇300</a></div></li><li class="li-parent" data-cateid="1973"><div class="div-parent"><a href="/cate-1972-1973.html">大宇360</a></div></li><li class="li-parent" data-cateid="1974"><div class="div-parent"><a href="/cate-1972-1974.html">大宇500</a></div></li></ul></div></li><li class="li-parent" data-cateid="1929"><div class="div-parent"><a href="/cate-1972-1929.html">卡特系列</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="1965"><div class="div-parent"><a href="/cate-1972-1965.html">卡特312</a></div></li><li class="li-parent" data-cateid="1966"><div class="div-parent"><a href="/cate-1972-1966.html">卡特320</a></div></li><li class="li-parent" data-cateid="1967"><div class="div-parent"><a href="/cate-1972-1967.html">卡特325</a></div></li><li class="li-parent" data-cateid="1968"><div class="div-parent"><a href="/cate-1972-1968.html">卡特330</a></div></li><li class="li-parent" data-cateid="1969"><div class="div-parent"><a href="/cate-1972-1969.html">卡特345</a></div></li></ul></div></li><li class="li-parent" data-cateid="1913"><div class="div-parent"><a href="/cate-1972-1913.html">日立系列</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="1930"><div class="div-parent"><a href="/cate-1972-1930.html">神钢系列</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="1961"><div class="div-parent"><a href="/cate-1972-1961.html">神钢60</a></div></li><li class="li-parent" data-cateid="1962"><div class="div-parent"><a href="/cate-1972-1962.html">神钢200</a></div></li><li class="li-parent" data-cateid="1963"><div class="div-parent"><a href="/cate-1972-1963.html">神钢230</a></div></li><li class="li-parent" data-cateid="1964"><div class="div-parent"><a href="/cate-1972-1964.html">神钢350</a></div></li></ul></div></li><li class="li-parent" data-cateid="1931"><div class="div-parent"><a href="/cate-1972-1931.html">沃尔沃系列</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="1976"><div class="div-parent"><a href="/cate-1972-1976.html">沃210</a></div></li><li class="li-parent" data-cateid="1960"><div class="div-parent"><a href="/cate-1972-1960.html">沃290</a></div></li><li class="li-parent" data-cateid="1959"><div class="div-parent"><a href="/cate-1972-1959.html">沃360</a></div></li></ul></div></li><li class="li-parent" data-cateid="1932"><div class="div-parent"><a href="/cate-1972-1932.html">现代系列</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="1911"><div class="div-parent"><a href="/cate-1972-1911.html">小松系列</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="1954"><div class="div-parent"><a href="/cate-1972-1954.html">小松60</a></div></li><li class="li-parent" data-cateid="1955"><div class="div-parent"><a href="/cate-1972-1955.html">小松100</a></div></li><li class="li-parent" data-cateid="1956"><div class="div-parent"><a href="/cate-1972-1956.html">小松200</a></div></li><li class="li-parent" data-cateid="1957"><div class="div-parent"><a href="/cate-1972-1957.html">小松300</a></div></li><li class="li-parent" data-cateid="1958"><div class="div-parent"><a href="/cate-1972-1958.html">小松400</a></div></li></ul></div></li><li class="li-parent" data-cateid="1915"><div class="div-parent"><a href="/cate-1972-1915.html">销子</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="1953"><div class="div-parent"><a href="/cate-1972-1953.html">组合</a><span class="menu_simpline_cur"></span></div></li></ul>
"""

en_text = """
<ul class="ul-parent clearfix"><li class="li-parent" data-cateid="2299"><div class="div-parent"><a href="/en/cate-2331-2299.html">D series</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="2300"><div class="div-parent"><a href="/en/cate-2331-2300.html">Daewoo series</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="2301"><div class="div-parent"><a href="/en/cate-2331-2301.html">Daewoo220</a></div></li><li class="li-parent" data-cateid="2302"><div class="div-parent"><a href="/en/cate-2331-2302.html">Daewoo280</a></div></li><li class="li-parent" data-cateid="2303"><div class="div-parent"><a href="/en/cate-2331-2303.html">Daewoo300</a></div></li><li class="li-parent" data-cateid="2304"><div class="div-parent"><a href="/en/cate-2331-2304.html">Daewoo360</a></div></li><li class="li-parent" data-cateid="2305"><div class="div-parent"><a href="/en/cate-2331-2305.html">Daewoo500</a></div></li></ul></div></li><li class="li-parent" data-cateid="2306"><div class="div-parent"><a href="/en/cate-2331-2306.html">Carter series</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="2307"><div class="div-parent"><a href="/en/cate-2331-2307.html">Carter312</a></div></li><li class="li-parent" data-cateid="2308"><div class="div-parent"><a href="/en/cate-2331-2308.html">Carter320</a></div></li><li class="li-parent" data-cateid="2309"><div class="div-parent"><a href="/en/cate-2331-2309.html">Carter325</a></div></li><li class="li-parent" data-cateid="2310"><div class="div-parent"><a href="/en/cate-2331-2310.html">Carter330</a></div></li><li class="li-parent" data-cateid="2311"><div class="div-parent"><a href="/en/cate-2331-2311.html">Carter345</a></div></li></ul></div></li><li class="li-parent" data-cateid="2297"><div class="div-parent"><a href="/en/cate-2331-2297.html">Hitachi series</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="2312"><div class="div-parent"><a href="/en/cate-2331-2312.html">Kobelco series</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="2313"><div class="div-parent"><a href="/en/cate-2331-2313.html">Kobelco60</a></div></li><li class="li-parent" data-cateid="2314"><div class="div-parent"><a href="/en/cate-2331-2314.html">Kobelco200</a></div></li><li class="li-parent" data-cateid="2315"><div class="div-parent"><a href="/en/cate-2331-2315.html">Kobelco230</a></div></li><li class="li-parent" data-cateid="2316"><div class="div-parent"><a href="/en/cate-2331-2316.html">Kobelco350</a></div></li></ul></div></li><li class="li-parent" data-cateid="2317"><div class="div-parent"><a href="/en/cate-2331-2317.html">Volvo series</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="2320"><div class="div-parent"><a href="/en/cate-2331-2320.html">Volvo210</a></div></li><li class="li-parent" data-cateid="2319"><div class="div-parent"><a href="/en/cate-2331-2319.html">Volvo290</a></div></li><li class="li-parent" data-cateid="2318"><div class="div-parent"><a href="/en/cate-2331-2318.html">Volvo360</a></div></li></ul></div></li><li class="li-parent" data-cateid="2321"><div class="div-parent"><a href="/en/cate-2331-2321.html">Modern series</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="2291"><div class="div-parent"><a href="/en/cate-2331-2291.html">Komatsu series</a><span class="menu_simpline_cur"></span><i class="fa fa-plus"></i></div><div class="ul-submenu"><div class="ul-submenu-up"></div><ul class="clearfix"><li class="li-parent" data-cateid="2292"><div class="div-parent"><a href="/en/cate-2331-2292.html">Komatsu60</a></div></li><li class="li-parent" data-cateid="2293"><div class="div-parent"><a href="/en/cate-2331-2293.html">Komatsu100</a></div></li><li class="li-parent" data-cateid="2294"><div class="div-parent"><a href="/en/cate-2331-2294.html">Komatsu200</a></div></li><li class="li-parent" data-cateid="2295"><div class="div-parent"><a href="/en/cate-2331-2295.html">Komatsu300</a></div></li><li class="li-parent" data-cateid="2296"><div class="div-parent"><a href="/en/cate-2331-2296.html">Komatsu400</a></div></li></ul></div></li><li class="li-parent" data-cateid="2298"><div class="div-parent"><a href="/en/cate-2331-2298.html">Pin</a><span class="menu_simpline_cur"></span></div></li><li class="li-parent" data-cateid="2322"><div class="div-parent"><a href="/en/cate-2331-2322.html">Combination</a><span class="menu_simpline_cur"></span></div></li></ul>
"""

# 正则表达式匹配类别名称和链接
pattern = re.compile(r'<a href="(/en/cate-[^"]+)">(.*?)</a>')

matches = pattern.findall(en_text)

# 解析并打印结果
categories = [{"name": name, "url": "http://sd-get.com" + url} for url, name in matches]

category_id = 1
for category in categories:
    spider.one(category["url"], category["name"], category_id=category_id)
    print(category)
    category_id += 1
